/*!
 * jQuery wmuSlider v1.0
 * 
 * Copyright (c) 2011 Brice Lechatellier
 * http://brice.lechatellier.com/
 *
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
(function(a){a.fn.wmuSlider=function(b){var c={autoplay:false,autoplaySpeed:4e3,transitionSpeed:400,showControlNav:true,showDirectionNav:true,showLoading:true,loadingText:"Loading...",prevText:"Previous",nextText:"Next"};var b=a.extend(c,b);return this.each(function(){var c;var d=a(this);var e;var f=d.find("ul");var g=f.find("li");var h=g.length;var i;var j;var k;var l=400;var m;d.css({position:"relative",overflow:"hidden"});f.css({position:"absolute",height:"100%"});g.css({position:"relative","float":"left",height:"100%"});var n=function(){e=d.width();f.css({left:-c*e,width:e*h});g.css({width:e});var b=a(g[c]);var i=b.find("img");d.css({height:i.height()})};var o=function(h){var i=a(g[h]);var j=i.find("img");if(b.showLoading&&j.attr("data-src")){i.append('<span class="muLoading">'+b.loadingText+"</span>")}f.animate({left:-h*e},b.transitionSpeed,function(){if(j){if(j.attr("data-src")){j.css("opacity",0);j.load(function(){d.animate({height:j.height()},b.transitionSpeed,function(){j.animate({opacity:1},b.transitionSpeed,function(){a(".muLoading").remove()})})});j.attr("src",j.attr("data-src"));j.removeAttr("data-src")}else{d.animate({height:j.height()},b.transitionSpeed)}}if(k){k.find("a").each(function(b){if(b==h){a(this).addClass("muActive")}else{a(this).removeClass("muActive")}})}c=h})};var p=function(a,d,g,i){if(m){clearTimeout(m)}if(d=="move"&&(g=="left"||g=="right")){if(g=="right"){f.css("left",-c*e+i)}else if(g=="left"){f.css("left",-c*e-i)}}else if(d=="cancel"){f.animate({left:-c*e},b.transitionSpeed)}else if(d=="end"){if(g=="right"&&c>0){o(c-1)}else if(g=="left"&&c+1<h){o(c+1)}else{f.animate({left:-c*e},b.transitionSpeed)}}};if(typeof Modernizr!="undefined"&&Modernizr.touch&&a.isFunction(a.fn.swipe)){b.showDirectionNav=false;d.swipe({triggerOnTouchEnd:false,swipeStatus:p,allowPageScroll:"vertical"})}if(b.showDirectionNav){d.append('<a href="#" class="muPrev">'+b.prevText+"</a>");d.append('<a href="#" class="muNext">'+b.nextText+"</a>");i=d.find(".muPrev").hide();j=d.find(".muNext").hide();d.hover(function(){i.show();j.show()},function(){i.hide();j.hide()});i.click(function(a){a.preventDefault();if(m){clearTimeout(m)}if(c==0){o(h-1)}else{o(c-1)}});j.click(function(a){a.preventDefault();if(m){clearTimeout(m)}if(c+1==h){o(0)}else{o(c+1)}})}if(b.showControlNav){d.append('<ul class="muControl"></ul>');k=d.find(".muControl");a.each(g,function(a){k.append('<li><a href="#">'+a+"</a></li>");k.find("a:eq("+a+")").click(function(b){b.preventDefault();if(m){clearTimeout(m)}o(a)})})}if(b.autoplay){var q=function(){if(c+1<h){o(c+1)}else{o(0)}m=setTimeout(q,b.autoplaySpeed)};m=setTimeout(q,b.autoplaySpeed)}var r=function(){if(e!=d.width()){n()}setTimeout(r,l)};setTimeout(r,l);o(0)})}})(jQuery)